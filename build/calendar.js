(()=>{"use strict";var e,t={453:()=>{const e=window.wp.element,t=window.React,n=(0,e.createContext)(),a="calendar_view",r="list_view";function l({children:e,isSmallViewport:l}){return(0,t.createElement)(n.Provider,{value:{defaultState:l?r:a,isSmallViewport:l}},e)}const i=window.lodash,o=window.wp.date;function c(e){const t={};return e.forEach((e=>{const n=new Date(e.datetime),a=(0,o.format)("Y-m-d",n);t.hasOwnProperty(a)?t[a].push(e):t[a]=[e]})),t}const s=(0,e.createContext)();function m({children:n,value:a}){const[r,l]=(0,e.useState)(function(){const{location:e}=window,t=e.href.match(/#(.+)/);return t?decodeURI(t[1]):""}());let o=a;const m=(0,i.uniqBy)(a.map((e=>({label:e.team,value:e.team.toLowerCase()}))).filter((({value:e})=>!!e)),"value");r&&r.trim().length&&(m.find((e=>e.value.toLowerCase()===r.toLowerCase()))||(r="",l(""))),r&&r.trim().length&&(o=a.filter((e=>e.team.toLowerCase()===r.toLowerCase())));const d={events:c(o),team:r,teams:m,setTeam:e=>{e=e.toLowerCase(),l(e),function(e=""){""===e?window.history.pushState(e,document.title,window.location.pathname):window.history.pushState(e,document.title,"#"+e)}(e)}};return(0,t.createElement)(s.Provider,{value:d},n)}function d(){const t=(0,e.useContext)(s);if(void 0===t)throw new Error("useEvents must be used within a Provider");return t}const g=window.wp.i18n,w=window.wp.components,u=window.wp.a11y,p={blank:!0};function _(e,t){const n=new Date(e,t,1).getDay(),a=new Date(e,t+1,0).getDate(),r=[];for(let e=0;e<n;e++)r.push(p);for(let n=1;n<=a;n++)r.push({month:t,year:e,day:n});const l=[];for(let e=0;e<Math.ceil(r.length/7);e++){const t=7*e;let n=r.slice(t,t+7);7!==n.length&&(n=[...n,...Array(7-n.length).fill(p)]),l.push(n)}return l}function h(e){const t={1:(0,g.__)("1st","wporg-meeting-calendar"),2:(0,g.__)("2nd","wporg-meeting-calendar"),3:(0,g.__)("3rd","wporg-meeting-calendar"),4:(0,g.__)("4th","wporg-meeting-calendar")},n=(0,o.format)("l",e.datetime);switch(e.recurring){case"weekly":return(0,g.sprintf)((0,g.__)("Every week on %s","wporg-meeting-calendar"),n);case"biweekly":return(0,g.sprintf)((0,g.__)("Every other week on %s","wporg-meeting-calendar"),n);case"monthly":return(0,g.__)("Every month","wporg-meeting-calendar");case"occurrence":return e.occurrence.length?(0,g.sprintf)((0,g.__)("Every month on the %s %s","wporg-meeting-calendar"),e.occurrence.map((e=>t[e])).join(", "),n):"";default:return(0,g.__)("Does not repeat","wporg-meeting-calendar")}}function E(e){return"#"===e[0]&&(e=e.slice(1)),(0,t.createElement)("a",{href:`https://wordpress.slack.com/app_redirect?channel=${e}`},"#",e)}function v(e){return"wporg-meeting-calendar__team-"+e.replace([" ","."],"-").toLowerCase()}function f(e){const t=new Date;return e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()}function y(e){return"cancelled"===e}function C(e){return new Date(e)>new Date}const b=function({blank:e=!1,year:n,month:a,day:r,events:l,onEventClick:i}){if(e)return(0,t.createElement)("td",{className:"wporg-meeting-calendar__cell","aria-hidden":!0});const c=new Date(n,a,r),s=l[(0,o.format)("Y-m-d",c)]||[],m=s.slice(25);return(0,t.createElement)("td",{className:`wporg-meeting-calendar__cell ${f(c)?"is-today":""} ${C(c)?"is-upcoming":""}`},(0,t.createElement)("strong",null,(0,t.createElement)("span",{className:"screen-reader-text"},(0,o.format)("F j",c)," ",(0,g.sprintf)(
// translators: %d: Count of all events, ie: 4.
// translators: %d: Count of all events, ie: 4.
(0,g._n)("%d event","%d events",s.length,"wporg-meeting-calendar"),s.length)),(0,t.createElement)("span",{className:"wporg-meeting-calendar__cell-day","aria-hidden":!0},r)),s.slice(0,25).map((e=>(0,t.createElement)(w.Button,{key:e.instance_id,variant:"link",onClick:()=>{i(e)},className:`wporg-meeting-calendar__cell-event ${v(e.team)} ${y(e.status)?"is-cancelled":""} ${C(e.datetime)?"is-upcoming":""}`},(0,t.createElement)("div",{className:"wporg-meeting-calendar__cell-event-time"},(0,o.format)("g:i a ",e.datetime)),(0,t.createElement)("div",{className:"wporg-meeting-calendar__cell-event-title"},e.title)))),!!m.length&&(0,t.createElement)(w.Dropdown,{className:"wporg-meeting-calendar__dropdown",position:"bottom center",renderToggle:({isOpen:e,onToggle:n})=>(0,t.createElement)(w.Button,{isLink:!0,onClick:n,"aria-expanded":e},(0,g.sprintf)(
// translators: %d: Count of hidden events, ie: 4.
// translators: %d: Count of hidden events, ie: 4.
(0,g._n)("%d more","%d more",m.length,"wporg-meeting-calendar"),m.length)),renderContent:()=>(0,t.createElement)(w.MenuGroup,null,m.map((e=>(0,t.createElement)(w.MenuItem,{key:e.instance_id,isLink:!0,onClick:()=>{i(e)},className:"wporg-meeting-calendar__cell-event "+v(e.team)+(y(e.status)?" is-cancelled":"")},(0,o.format)("g:i a: ",e.datetime),e.title))))}))},k=function(){const{l10n:e}=(0,o.__experimentalGetSettings)();return(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,e.weekdaysShort.map(((n,a)=>(0,t.createElement)("th",{scope:"col",key:n},(0,t.createElement)("span",{className:"screen-reader-text"},e.weekdays[a]),(0,t.createElement)("span",{"aria-hidden":!0},n))))))},V=window.wp.url,L=function({event:e,onRequestClose:n}){const a=(0,o.gmdate)("Ymd\\THis\\Z",e.datetime),r=Number((0,o.gmdate)("U",e.datetime))+3600,l=(0,o.gmdate)("Ymd\\THis\\Z",1e3*r),i=e.location.replace("#","");let c=(0,V.addQueryArgs)("https://calendar.google.com/calendar/render",{action:"TEMPLATE",text:e.title,dates:`${a}/${l}`,details:`Location: #${i} on Slack - https://wordpress.slack.com/app_redirect?channel=${i} `});return e.rrule&&(c=(0,V.addQueryArgs)(c,{recur:e.rrule})),(0,t.createElement)(w.Modal,{title:e.title,className:"wporg-meeting-calendar__modal",overlayClassName:"wporg-meeting-calendar__modal-overlay",onRequestClose:n},y(e.status)?(0,t.createElement)(w.Notice,{className:"wporg-meeting-calendar__modal-notice",status:"warning",isDismissible:!1},(0,g.__)("This meeting has been cancelled","wporg-meeting-calendar")):(0,t.createElement)("p",null,(0,t.createElement)("abbr",{title:(0,o.gmdate)("c",e.datetime)},(0,o.format)("l, F j, Y, g:i a (\\U\\T\\CP)",e.datetime))),!!e.location&&(0,t.createElement)("p",null,"Location: ",E(e.location)),(0,t.createElement)("p",null,"Meets: ",h(e)),!!e.link&&(0,t.createElement)("p",null,(0,t.createElement)("a",{href:e.link},e.title)),(0,t.createElement)("p",{className:"wporg-meeting-calendar__modal-export-links"},(0,t.createElement)("a",{href:c},(0,g.__)("Add to Google Calendar","wporg-meeting-calendar"))),!!e.wptv_url&&(0,t.createElement)("p",null,(0,t.createElement)("a",{"aria-label":(0,g.__)("WordPress.tv URL for the meeting recording","wporg-meeting-calendar"),href:e.wptv_url},(0,g.__)("View Recording","wporg-meeting-calendar"))))},N=function({month:n,year:a}){const[r,l]=(0,e.useState)(null),i=_(a,n),{events:o}=d();return(0,t.createElement)(e.Fragment,null,(0,t.createElement)("table",null,(0,t.createElement)(k,null),(0,t.createElement)("tbody",null,i.map(((e,n)=>(0,t.createElement)("tr",{key:`row-${n}`},e.map(((e,a)=>(0,t.createElement)(b,{key:`cell-${n}-${a}`,...e,events:o,onEventClick:l})))))))),r&&(0,t.createElement)(L,{event:r,onRequestClose:()=>{l(null)}}))},S=window.wp.primitives;function M(){return(0,t.createElement)(S.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(S.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M9.46978 6.46967L10.5304 7.53033L6.81077 11.25L20.0001 11.25V12.75L6.81077 12.75L10.5304 16.4697L9.46978 17.5303L3.93945 12L9.46978 6.46967Z"}))}function x(){return(0,t.createElement)(S.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/SVG"},(0,t.createElement)(S.Path,{d:"M7 10H9V12H7V10Z"}),(0,t.createElement)(S.Path,{d:"M9 14H7V16H9V14Z"}),(0,t.createElement)(S.Path,{d:"M11 10H13V12H11V10Z"}),(0,t.createElement)(S.Path,{d:"M17 10H15V12H17V10Z"}),(0,t.createElement)(S.Path,{d:"M11 14H13V16H11V14Z"}),(0,t.createElement)(S.Path,{d:"M17 14H15V16H17V14Z"}),(0,t.createElement)(S.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M3 5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5ZM19.5 7H4.5V19C4.5 19.2761 4.72386 19.5 5 19.5H19C19.2761 19.5 19.5 19.2761 19.5 19V7Z"}))}function H(){return(0,t.createElement)(S.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,t.createElement)(S.Path,{d:"M0 0h24v24H0z",fill:"none"}),(0,t.createElement)(S.Path,{d:"M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z"}))}function P(){return(0,t.createElement)(S.SVG,{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},(0,t.createElement)(S.Path,{d:"M0 0h24v24H0z",fill:"none"}),(0,t.createElement)(S.Path,{d:"M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}))}function D(){return(0,t.createElement)(S.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/SVG"},(0,t.createElement)(S.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 10C7.10457 10 8 9.10457 8 8C8 6.89543 7.10457 6 6 6C4.89543 6 4 6.89543 4 8C4 9.10457 4.89543 10 6 10ZM20 8.75H11.1111V7.25H20V8.75ZM20 15.75H11.1111V14.25H20V15.75ZM8 15C8 16.1046 7.10457 17 6 17C4.89543 17 4 16.1046 4 15C4 13.8954 4.89543 13 6 13C7.10457 13 8 13.8954 8 15Z"}))}function $({event:e}){return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("span",null,e.title),y(e.status)&&(0,t.createElement)("span",null,(0,g.__)(" Meeting is cancelled","wporg-meeting-calendar")))}const R=function({date:e,events:n}){const{setTeam:a}=d();return(0,t.createElement)("li",{key:`row-${e}`},(0,t.createElement)("h3",{className:"wporg-meeting-calendar__list-title"},(0,t.createElement)("span",null,(0,o.format)("l - F j, Y",e))),n.map((n=>(0,t.createElement)("article",{className:"wporg-meeting-calendar__list-event "+(y(n.status)?"is-cancelled":""),key:n.instance_id},n.team&&(0,t.createElement)("div",{className:"wporg-meeting-calendar__list-event-team-wrapper"},(0,t.createElement)("a",{className:"wporg-meeting-calendar__list-event-team "+v(n.team),"aria-label":(0,g.sprintf)(
// translators: %s is the team name
// translators: %s is the team name
(0,g.__)("All %s meetings","wporg-meeting-calendar"),n.team),href:`#${n.team.toLowerCase()}`,onClick:e=>{e.preventDefault(),a(n.team),(0,u.speak)((0,g.sprintf)(
// translators: %s is the team name
// translators: %s is the team name
(0,g.__)("Showing meetings for %s","wporg-meeting-calendar"),n.team))}},n.team)),(0,t.createElement)("div",{className:"wporg-meeting-calendar__list-event-header"},(0,t.createElement)("h4",{className:"wporg-meeting-calendar__list-event-title"},n.link?(0,t.createElement)("a",{href:n.link},(0,t.createElement)($,{event:n})):(0,t.createElement)($,{event:n})),(0,t.createElement)("div",{className:"wporg-meeting-calendar__list-event-time"},(0,o.format)("g:i a ",n.datetime),(0,o.format)("(\\U\\T\\CP)",e))),(0,t.createElement)("div",{className:"wporg-meeting-calendar__list-event-details"},(0,t.createElement)("p",{className:"wporg-meeting-calendar__list-event-copy"},(0,g.__)("Meets: ","wporg-meeting-calendar"),h(n)),(0,t.createElement)("p",{className:"wporg-meeting-calendar__list-event-copy"},(0,g.__)("Location: ","wporg-meeting-calendar"),E(n.location))),!!n.wptv_url&&(0,t.createElement)("div",null,(0,t.createElement)("p",{className:"wporg-meeting-calendar__list-event-copy"},(0,t.createElement)("a",{"aria-label":(0,g.__)("WordPress.tv URL for the meeting recording","wporg-meeting-calendar"),href:n.wptv_url},(0,g.__)("View Recording","wporg-meeting-calendar"))))))))},B=function({month:n,year:a}){const[r,l]=(0,e.useState)(!1),c=_(a,n),{events:s}=d(),m=(0,i.flatten)(c).filter((e=>!e.blank)),u=new Date;u.setHours(-1,59,0,0);const p=new Date(a,n)<u,h=m.map(((e,n)=>{const a=new Date(e.year,e.month,e.day),l=(0,o.format)("Y-m-d",a),i=s[l]||[];return(r||a>u)&&i.length?(0,t.createElement)(R,{key:`row-${n}`,date:a,events:i}):null})).filter((e=>!!e));return(0,t.createElement)(t.Fragment,null,p&&(r?(0,t.createElement)("p",{className:"wporg-meeting-calendar__list-expand"},(0,t.createElement)(w.Button,{icon:H,onClick:()=>l(!1)},(0,g.__)("Hide past meetings","wporg-meeting-calendar"))):(0,t.createElement)("p",{className:"wporg-meeting-calendar__list-expand"},(0,t.createElement)(w.Button,{icon:P,onClick:()=>l(!0)},(0,g.__)("Show past meetings","wporg-meeting-calendar")))),h.length?(0,t.createElement)("ul",{className:"wporg-meeting-calendar__list"},h):(0,t.createElement)("p",{className:"wporg-meeting-calendar__list-empty"},(0,g.__)("No Events Scheduled","wporg-meeting-calendar")))},F=()=>{const{teams:n,team:a,setTeam:r}=d(),l=(0,e.useRef)(null);if(n.length<2)return null;n.sort(((e,t)=>e.label.localeCompare(t.label)));const i="wporg-meeting-calendar__filter-dropdown",o=n.find((e=>a===e.value));return(0,t.createElement)("div",{className:"wporg-meeting-calendar__filter"},(0,t.createElement)("label",{className:"wporg-meeting-calendar__filter-label",htmlFor:i,ref:l},(0,g.__)("Filter by team: ","wporg-meeting-calendar")),(0,t.createElement)(w.SelectControl,{id:i,className:"wporg-meeting-calendar__filter-dropdown",value:a,options:[{label:(0,g.__)("All teams","wporg-meeting-calendar"),value:""},...n],onChange:e=>{r(e);const t=n.find((t=>e===t.value));(0,u.speak)((0,g.sprintf)(
// translators: %s is the team name
// translators: %s is the team name
(0,g.__)("Showing meetings for %s","wporg-meeting-calendar"),t.label),"assertive")}}),""!==a&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("p",{className:"wporg-meeting-calendar__filter-applied"},(0,g.sprintf)(
// translators: %s is the team name
// translators: %s is the team name
(0,g.__)("Showing meetings for %s","wporg-meeting-calendar"),o.label)),(0,t.createElement)(w.Button,{icon:"no-alt",variant:"link",isDestructive:!0,onClick:()=>{r(""),(0,u.speak)((0,g.__)("Showing all meetings.","wporg-meeting-calendar"),"assertive"),l.current.focus()},className:"wporg-meeting-calendar__filter-remove"},(0,t.createElement)("span",null,(0,g.__)("Remove team filter","wporg-meeting-calendar")))))},Z=()=>{const{teams:e,team:n}=d(),a=e.find((e=>n===e.value)),r=()=>{const e=window.location.origin;return a?`${e}/meetings-${encodeURIComponent(a.value)}.ics`:`${e}/meetings.ics`};return(0,t.createElement)("div",{className:"wporg-meeting-calendar__feed"},(0,t.createElement)("p",null,(0,g.__)("Events are shown in your local time zone.","wporg-meeting-calendar")),(0,t.createElement)("p",null,(0,g.__)("Subscribe to this calendar:","wporg-meeting-calendar")," ",(0,t.createElement)("a",{href:(()=>{const e=r().replace("https://","webcal://");return(0,V.addQueryArgs)("https://www.google.com/calendar/render",{cid:e})})()},(0,g.__)("Google Calendar ↗","wporg-meeting-calendar"))," ","·"," ",(0,t.createElement)("a",{href:r()},(0,g.__)("ICS","wporg-meeting-calendar"))," ","·"," ",(0,t.createElement)("a",{href:`${window.location.origin}/feed/?post_type=meeting`},(0,g.__)("RSS","wporg-meeting-calendar"))))},O=function(){const l=new Date,i=l.getMonth(),c={month:i,year:l.getFullYear()},[{month:s,year:m},d]=(0,e.useState)(c),{isCalendarView:p,isListView:_,setCalendarView:h,setListView:E,shouldForceListView:v}=function(){const t=(0,e.useContext)(n),l=e=>i===e;if(void 0===t)throw new Error("useViews must be used within a Provider");const[i,o]=(0,e.useState)(t.defaultState);return{isCalendarView:()=>l(a),isListView:()=>l(r),setCalendarView:()=>o(a),setListView:()=>o(r),shouldForceListView:t.isSmallViewport}}();return v&&!_()&&E(),(0,t.createElement)(e.Fragment,null,(0,t.createElement)("div",{className:"wporg-meeting-calendar__header"},(0,t.createElement)("nav",{className:"wporg-meeting-calendar__btn-group","aria-label":(0,g.__)("Month navigation","wporg-meeting-calendar")},(0,t.createElement)(w.Button,{variant:"secondary",onClick:()=>{d({month:s-1,year:m})},disabled:s===i,"aria-label":(0,g.__)("Previous","wporg-meeting-calendar")},(0,t.createElement)(M,{"aria-hidden":"true",focusable:"false"})),(0,t.createElement)(w.Button,{variant:"secondary",onClick:()=>{d({month:s+1,year:m})},disabled:s>i,"aria-label":(0,g.__)("Next","wporg-meeting-calendar")},(0,t.createElement)(M,{"aria-hidden":"true",focusable:"false"}))),(0,t.createElement)("div",null,(0,t.createElement)("h2",{"aria-live":"polite","aria-atomic":!0},(0,o.date)("F Y",new Date(m,s,2)))),(0,t.createElement)("nav",{className:"components-button-group","aria-label":(0,g.__)("View options","wporg-meeting-calendar")},(0,t.createElement)(w.Button,{variant:_()?"primary":"secondary",onClick:()=>{_()||(0,u.speak)((0,g.__)("Switched to list view","wporg-meeting-calendar")),E()},disabled:v,"aria-label":(0,g.__)("List view","wporg-meeting-calendar")},(0,t.createElement)(D,{"aria-hidden":"true",focusable:"false"})),(0,t.createElement)(w.Button,{variant:p()?"primary":"secondary",onClick:()=>{p()||(0,u.speak)((0,g.__)("Switched to calendar view","wporg-meeting-calendar")),h()},disabled:v,"aria-label":(0,g.__)("Calendar view","wporg-meeting-calendar")},(0,t.createElement)(x,{"aria-hidden":"true",focusable:"false"})))),(0,t.createElement)(F,null),p()&&(0,t.createElement)(N,{month:s,year:m}),_()&&(0,t.createElement)(B,{month:s,year:m}),(0,t.createElement)(Z,null))},T=function({events:e}){const{isSmall:n}=(()=>{const e="object"==typeof window;function n(){return{isSmall:e?window.innerWidth<600:void 0}}const[a,r]=(0,t.useState)(n);return(0,t.useEffect)((()=>{if(!e)return!1;const t=()=>{r(n())};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),a})();return(0,t.createElement)(m,{value:e},(0,t.createElement)(l,{isSmallViewport:n},(0,t.createElement)(O,null)))};document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("wporg-meeting-calendar-js");if(!t)return;const n=(e=>JSON.parse(e.getAttribute("data-meetings")))(t);(0,e.render)((0,e.createElement)(T,{events:n}),t)}))}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,a),l.exports}a.m=t,e=[],a.O=(t,n,r,l)=>{if(!n){var i=1/0;for(m=0;m<e.length;m++){for(var[n,r,l]=e[m],o=!0,c=0;c<n.length;c++)(!1&l||i>=l)&&Object.keys(a.O).every((e=>a.O[e](n[c])))?n.splice(c--,1):(o=!1,l<i&&(i=l));if(o){e.splice(m--,1);var s=r();void 0!==s&&(t=s)}}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[n,r,l]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={517:0,784:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,l,[i,o,c]=n,s=0;if(i.some((t=>0!==e[t]))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(c)var m=c(a)}for(t&&t(n);s<i.length;s++)l=i[s],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(m)},n=globalThis.webpackChunkmeeting_calendar=globalThis.webpackChunkmeeting_calendar||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[784],(()=>a(453)));r=a.O(r)})();